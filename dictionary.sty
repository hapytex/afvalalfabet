\ProvidesPackage{dictionary}
% \RequirePackage{fancyhdr}
\RequirePackage[utf8]{inputenc}
%\DeclareUnicodeCharacter{00A0}{~} % finds hidden non-breakable space
\RequirePackage[T1]{fontenc}
\RequirePackage{xparse}
\RequirePackage{glossaries}
%\RequirePackage{tgpagella}
%\RequirePackage[scaled]{helvet}
%\RequirePackage{enumitem}
%\RequirePackage{hanging}
%\RequirePackage{makeidx}
%\RequirePackage{stmaryrd}
\RequirePackage{tikz}
\usetikzlibrary{calc}
%\RequirePackage{tipa}
%\RequirePackage{dingbat}
%\RequirePackage{manfnt}
%\RequirePackage{latexsym}
%\RequirePackage{graphicx}
%\RequirePackage{savetrees}
%\RequirePackage{color}
\RequirePackage{titlesec}
\RequirePackage[topmarks, extramarks]{titleps}
% \RequirePackage{fixltx2e}
% \RequirePackage{fix2col}
\RequirePackage{bophook}
% \RequirePackage{fixmarks}
% \RequirePackage{fourier-orns} %used for ornaments
% \RequirePackage{amsmath} %used for non-breakabledash
% \RequirePackage{hyphenat} % no hyphen in abbreviations
\RequirePackage[labelformat=empty]{caption}

\newcommand{\entrytitle}{}
\newcounter{entry}
\setlength{\parskip}{0cm}
\setlength{\parindent}{0cm}
\titlespacing{\paragraph}{0cm}{0cm}{0cm}
\renewcommand{\baselinestretch}{0}

\def{\oldentry}{}
\def{\firstentry}{}
\newmarkset{entry}
\newextramark{entry}{\entrytitle}
\newtitlemark{\entrytitle}
\newextramark*{entry}{entry}

% tables
% declention and conjugation tables
% \RequirePackage{caption}
% \RequirePackage{booktabs}
\captionsetup{labelformat=empty}
% \RequirePackage{floatrow}
% \DeclareFloatFont{footnotesize}{\footnotesize}% "scriptsize" is defined by floatrow, "tiny" not
% \floatsetup[table]{font=footnotesize}
%\setlength {\heavyrulewidth }{0.1 em}
%\setlength{\columnwidth}{2cm}

\newpagestyle{dict}{%
  \sethead
    {\firstentry{}} % \topextramarks{entry}\entrytitle}% left
    {\thepage}% centre
    {\botextramarks{entry}\entrytitle}% right
   \setheadrule{.4pt}% Regular header rule
}

% place frequent star
\newcommand{\freqstar}{%
\raisebox{-.2ex}{%
  \textcolor{darkgreen}{\ding{167}}%
}%
}%

% float control
\renewcommand{\topfraction}{0.9}    % max fraction of floats at top
\renewcommand{\bottomfraction}{0.8} % max fraction of floats at bottom
%   Parameters for TEXT pages (not float pages):
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{1}
\setcounter{totalnumber}{2}     % 2 may work better
\setcounter{dbltopnumber}{2}    % for 2-column pages
\renewcommand{\dbltopfraction}{0.9} % fit big float above 2-col. text
\renewcommand{\textfraction}{0.07}  % allow minimal text w. figs
%   Parameters for FLOAT pages (not text pages):
\renewcommand{\floatpagefraction}{0.7}  % require fuller float pages
% N.B.: floatpagefraction MUST be less than topfraction !!
\renewcommand{\dblfloatpagefraction}{0.7}   % require fuller float pages
% remember to use [htp] or [htpb] for placement

\makeatletter
\setlength{\@fptop}{0pt}
\setlength{\@fpbot}{0pt plus 1fil}
\makeatother


% pdf information
\RequirePackage[pdftex,colorlinks=true]{hyperref}

% COLORS
\definecolor{darkgreen}{rgb}{0.4, 0.01, 0.24}
\definecolor{royalazure}{rgb}{0.0, 0.22, 0.66}
\definecolor{brown}{rgb}{0.4, 0.01, 0.24}

% COLORS FOR THUMB INDEXES
\definecolor{babyblueeyes}{rgb}{0.63, 0.79, 0.95}
\definecolor{unitednationsblue}{rgb}{0.36, 0.57, 0.9}
\definecolor{blue(ryb)}{rgb}{0.01, 0.28, 1.0}
\definecolor{darkblue}{rgb}{0.0, 0.0, 0.55}
\definecolor{screamingreen}{rgb}{0.46, 1.0, 0.44}
\definecolor{limegreen}{rgb}{0.2, 0.8, 0.2}
\definecolor{islamicgreen}{rgb}{0.0, 0.56, 0.0}
\definecolor{upforestgreen}{rgb}{0.0, 0.27, 0.13}
\definecolor{icterine}{rgb}{0.99, 0.97, 0.37}
\definecolor{orange(colorwheel)}{rgb}{1.0, 0.5, 0.0}
\definecolor{orange-red}{rgb}{1.0, 0.27, 0.0}
\definecolor{oucrimsonred}{rgb}{0.6, 0.0, 0.0}
\definecolor{cottoncandy}{rgb}{1.0, 0.74, 0.85}
\definecolor{orchid}{rgb}{0.85, 0.44, 0.84}
\definecolor{vividcerise}{rgb}{0.85, 0.11, 0.51}
\definecolor{patriarch}{rgb}{0.5, 0.0, 0.5}

% Thumb indexes' colors
\newcommand\BoxColor{%
\ifcase\theletternum darkgreen!30\or babyblueeyes\or unitednationsblue\or blue(ryb)\or screamingreen\or limegreen\or islamicgreen\or upforestgreen\or icterine\or orange(colorwheel)\or orange-red%
\or oucrimsonred\or cottoncandy\or orchid\or vividcerise\or patriarch\or babyblueeyes\or unitednationsblue\or blue(ryb)\or screamingreen\or limegreen\or islamicgreen\or upforestgreen\or icterine\or orange(colorwheel)\or orange-red%
\or oucrimsonred\or cottoncandy\or orchid\or vividcerise\or patriarch\else darkgreen!30\fi}

%COMMANDS
\def\firstentry{}
\newcommand{\setfirstentry}[1]{
  \renewcommand{\entrytitle}{#1}
  \ifnum\the\value{entry}=0\edef\firstentry{\oldentry}\fi
  \ifdefempty{\firstentry}{\edef\firstentry{#1}}{}
  \edef\oldentry{#1}
  \stepcounter{entry}
}
\AtBeginPage{\resetfirstentry}
\newcommand{\resetfirstentry}[0]{
  \setcounter{entry}{0}
}

\newcommand{\entry}[3][]{
\preextramark{entry}
% \hangpara{2em}{1}{
\paragraph{#2}\setfirstentry{#2}
%}
 #3
\extramark{entry}
\\
}
%}
\nopagebreak[4]
% \newcommand*{\dictchar}[1]{\parbox[c][3cm][c]{2cm}{\Huge\textbf{#1}}\par}

\newcommand*{\dictchar}[1]{
\centerline{\parbox[c][3cm][c]{2cm}{\fontsize{24}{24}\selectfont{#1}}}\par
}

% \newcommand{\devision}[1]{\hspace*{-2em}{{{{\foreignlanguage{icelandic}{\color{royalazure}{\fontfamily{phv}\selectfont{\textbf{#1}}}}}}}}}

%hyperlinks in black
\makeatletter
\let\Hy@linktoc\Hy@linktoc@none
\makeatother
%FANCY PAGE STYLES
% \pagestyle{fancy}

% THUMB INDEXES
% new counter to hold the current number of the letter to determine the vertical position
\newcounter{letternum}
% newcounter for the sum of all letters to get the right height of a box
\newcounter{lettersum}
\setcounter{lettersum}{33}
% some margin settings
\newlength{\thumbtopmargin}
\setlength{\thumbtopmargin}{1cm}
\newlength{\thumbbottommargin}
\setlength{\thumbbottommargin}{3cm}
% calculate the box height by dividing the page height
\newlength{\thumbheight}
\pgfmathsetlength{\thumbheight}{%
(\paperheight-\thumbtopmargin-\thumbbottommargin)%
/%
\value{lettersum}
}
% box width
\newlength{\thumbwidth}
\setlength{\thumbwidth}{0.5cm}
% style the boxes
\tikzset{
thumb/.style={
   text=white,
   minimum height=\thumbheight,
   text width=\thumbwidth,
   outer sep=0pt,
   font=\sffamily\bfseries,
}
}
\newcommand{\oddthumb}[1]{%
    % see pgfmanual.pdf for more information about this part
    \begin{tikzpicture}[remember picture, overlay]
        \node [thumb,fill=\BoxColor, text centered,anchor=north east,] at ($%
            (current page.north east)-%
            (0,\thumbtopmargin+\value{letternum}*\thumbheight)%
        $) {#1};
   \end{tikzpicture}
 }
 \newcommand{\eventhumb}[1]{%
    % see pgfmanual.pdf for more information about this part
    \begin{tikzpicture}[remember picture, overlay]
        \node [thumb,fill=\BoxColor, text centered,anchor=north west,] at ($%
            (current page.north west)-%
            (0,\thumbtopmargin+\value{letternum}*\thumbheight)%
        $) {#1};
   \end{tikzpicture}
 }
 % create a new command to set a new lettergroup with thumb indexes
 \newcommand{\lettergroup}[1]{%
 % \fancyhead[LO]{\fontfamily{phv}\selectfont{\textbf{\rightmark}}\eventhumb{#1}}%
 % \fancyhead[RE]{\fontfamily{phv}\selectfont{\textbf{\leftmark}}\oddthumb{#1}}%
 % step the counter of the letters
 \stepcounter{letternum}%
 }

 % BASIC PAGE STYLE
 % \fancypagestyle{basicstyle}{%
 % \fancyhf{}
 \renewcommand{\headrulewidth}{0.4pt}
 \renewcommand{\footrulewidth}{0pt}
 % \fancyhead[LE,RO]{\textbf{\chaptitle}}
 % \fancyhead[LO,RE]{\textbf{\thepage}}
 % }

 % INDEX PAGE STYLE
 % \fancypagestyle{indexstyle}{%
 % \fancyhf{}% Clear header/footer
 % \renewcommand{\headrulewidth}{0.4pt}% 0.4pt header rule
 % \renewcommand{\footrulewidth}{0pt}% No footer rule
 % \fancyhead[C]{\thepage}% Page in footer, centred
 % }

 % DICTIONARY PAGE STYLE
 %\fancypagestyle{dictstyle}{%
 %\renewcommand{\headrulewidth}{0.4pt}
 %\fancyhf{}
 %\fancyhead[LE,LO]{{\fontfamily{phv}\selectfont{\textbf{\rightmark}}}}
 %\fancyhead[CO,CE]{\thepage}
 %\fancyhead[RE,RO]{{\fontfamily{phv}\selectfont{\textbf{\leftmark}}}}}

 %\setlength{\columnsep}{20pt}
 %\setlength{\columnseprule}{0.1pt}

 % \titleformat{\chapter}[block]
 %{\normalfont\huge\bfseries}{\thechapter.}{1em}{\Huge}
 %\titlespacing*{\chapter}{20pt}{20pt}{20pt}

 % GRAPHICS PATH
% \graphicspath{/home/SomeUser/Documents/dictionary/images/}

 % TITLE, AUTHORS, THANKS
% \title{\textbf{Name of Dictionary}
% \thanks{Words of thanks}}
% \author{Authors}
% \date{Date}

 % LOCALIZATION

 % \newcommand{\HRule}{\rule{\linewidth}{0.1mm}} % rule line

 \newcommand*{\chaptitle}{}
 \renewcommand*{\chaptermark}[1]{%
 \renewcommand*{\chaptitle}{#1}}
